https://idom.me/articles/171.html



# 第8章 设计 API 时要区分目标用户群

这一章描述了 API 也 SPI 的概念为以后代码设计工作提供了很好的理论支撑。



API ： 提供给外部用户使用的功能，用户只能调用没法选择。例如 InputSream、OutputStream 都是 API

SPI ： 给用户提供的拓展点，用户可以注入自己的实现：例如 ChatRoomSDK 里面的各种依赖注入，都是 SPI



API 和 SPI 都是一份契约但都有着各自的演化方向：

一般来说 API 提供的类和方法都有可能被用户使用了，如果贸然删除、重命名、更改包名、修改访问权限、修改参数列表都会造成客户代码无法编译的问题，==所以 API （被声明为可访问的内容）都不能修改现有外观，只能做加==。

而 SPI 一般都被设计成接口来让使用者注入自己的逻辑，接口一旦增加方法实现者就必须覆盖，否者无法通过编译，但是如果实现类不在调用某个方法倒是可以直接删除，==所以 SPI 可以删除但是不能随意增加方法==



<font color= red>API 不能修改会删除现有的一切，但是可以增加方法，SPI 可以删除已经存在的方法，但是不能增加也不能修改现有的内容</font>