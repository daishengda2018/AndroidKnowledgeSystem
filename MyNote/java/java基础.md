

[TOC]

#  Java的对象引用

软引用、弱引用都指定说其应用的对象**只存在软引用或者弱引用**，不存在其他的强引用了这样GC才能回收他们，之前对于引用的理解有偏差，一直错误的认为，只要把引用放到软、弱引用中就会有GC逻辑，不是的，前提必须是不存在强引用。



# 多线程和线程同步

## 进程与线程

* 进程：相对隔离的工作空间，每个进程直接彼此独立。

* 什么是线程：按代码顺序执行下来，执行完毕就结束的一条线。

  * Android 的 UI 线程为啥不结束呢？因为它在初始化的时候就开始执行死循环，什么操作系统把它停止了什么时候才会停止，每一次循环都是一次界面刷新，如果卡时间长了就会出现 ANR问题。

  * CPU 线程：CPU 线程是通过物理手段支持的，简单的来说就是 CPU 可以同时干多少件事情。
  * 操作系统线程：通过时间分片模拟出来的线程，是一种逻辑线程。我们所说的一般都是操作系统线程。通过这种时间分片的模式，哪怕 CPU 仅支持单线程，操作系统也可以模拟出几百个逻辑线程。

* 线程池

  * shutdown ： 较柔和，不再让新的任务进入，等待正在执行的任务执行完成
  * shutdownNow：暴力，立即停止所有的任务。

  

  newSingleThreadExcutor

  newCacheThreadExcutor

  newFixedThreadPool

  newSchudleThreadExcutor

* 

将线程数和 CPU 数量挂钩：让代码的积极度在不同机器上的表现是一致的。并不是说可以提高 CPU 的利用率。